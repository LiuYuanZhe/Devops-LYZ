Kubernetes过一系列机制来实现集群的安全机制，包括API Server的认证、授权、准入控制机制等。集群的安全性必须考虑以下的几个目标：

- 保证容器与其所在宿主机的隔离；
- 限制容器给基础设施及其他容器带来消极影响的能力；
- 最小权限原则，合理限制所有组件权限，确保组件只执行它被授权的行为，通过限制单个组件的能力来限制他所能达到的权限范围；
- 明确组件间边界的划分；
- 划分普通用户和管理员角色；
- 在必要的时候允许将管理员权限赋给普通用户；
- 允许拥有Secret数据（Keys、Certs、Passwords）的应用在集群中运行；

 

 

 https工作流程

1. 浏览器发起https请求，将自己支持的一套加密规则发送给服务端。

2. 服务端从中选出一组加密算法与HASH算法，并将自己的身份信息以证书的形式发回给浏览器。证书里面包含了服务端地址，加密公钥，以及证书的颁发机构等信息。

3. 获得服务端证书之后浏览器要做以下工作：

    

   - 验证证书的合法性（颁发证书的机构是否合法，证书中包含的服务端地址是否与正在访问的地址一致等），如果证书受信任，则浏览器栏里面会显示一个小锁头，否则会给出证书不受信的提示。
   - 如果证书受信任，或者是用户接受了不受信的证书，浏览器会生成一串随机数的密码，并用证书中提供的公钥加密。
   - 使用约定好的HASH计算握手消息，并使用生成的随机数对消息进行加密，最后将之前生成的所有信息发送给服务端。

4.  服务端接收浏览器发来的数据之后要做以下的操作：

   - **使用自己的私钥将信息解密取出密码，使用密码解密浏览器发来的握手消息，并验证HASH是否与浏览器发来的一致**。
   - **使用密码加密一段握手消息，发送给浏览器**。

5. 浏览器解密并计算握手消息的HASH，如果与服务端发来的HASH一致，此时握手过程结束，之后**所有的通信数据将由之前浏览器生成的随机密码并利用加密算法进行加密**。

 

 

 

 

 

 

 