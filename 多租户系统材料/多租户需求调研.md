角色：租户，管理员（租户）

story：

​	租户：

​	实例的创建：租户登陆多租户系统，购买或选择实现分配的一个应用实例(可以是集群提供服务)（sass，提示该实例相关的中间件与数据服务），选择服务器配置（内存，cpu核数，显示推荐配置），之后实例在该租户管理页面中出现，用户可以启动该实例，启动时选择服务器（是否可以让租户选择还是对租户隐藏，当前可用）和服务相关配置（服务发现与暴露服务端口，可配域名等）。

​	实例的监控：通过多租户后台系统可以看到自己名下的运行实例，状态，访问方式，实例的监控通过健康接口。

​	实例的管理：提供url，是否可以切换域名，重启实例。

​	管理员：

​	1.linux环境：

​	实例的部署：管理员通过linux环境托管用户的saas服务，管理员在多租户管理端查看用户的应用实例部署，通过用户的需求将用户购买的实例通过手工部署在相应的服务器上，部署之前要配置响应的中间件与数据服务（这里要考虑中间件通过服务隔离还是响应内部topic等隔离，数据库通过数据库实例隔离还是表空间隔离），并手动在控制台录入部署的信息（部署机器，开放端口）。

​	实例运行：购买的实例有周期，周期到了需要依据是否延期来判断时候删除实例（停掉linux服务器上的实例并修改后台上的状态，如果一段时间不续费就删除在服务器上的实例）。

​	服务器更新：管理员需要在初始化的时候将现有的服务器信息录入多租户后台，并定期更新服务器机器的信息，服务器的状态可以通过zabbix，promethus等相关查询，或者使用定时任务脚本去及时更新并在后台显示。

​	租户账号的管理：管理员可以创建租户账号，分配给租户项目的权限。

​	租户与服务器的关系，在linux环境下：混合服务器因为可能出现一个服务器部署不同的实例。单服务器：每个租户有自己的服务器，给各个租户划分自己的服务器。

- 服务器是否对租户是透明的：多租户就是将用户的应用混合的部署在机器上，通过方法进行隔离，对用户提供服务，所以对租户来说服务器应该是不透明的。

多租户资源的监控，结合运维管理系统

租户的管理：

​	2.kubernetes+docker部署：

​	实例的部署：通过kubernetes的yaml文件部署，yaml文件的数据通过前台租户的选择生成并存入后台（json格式）。

​	dashboard的查看：通过对接kubernetes控制台或其他开源多租户开源平台来展示后台，服务器信息使用grafana+promethus实现。